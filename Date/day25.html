<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			* {
				margin: 0;
				padding: 0;
			}
			
			p {
				margin: auto 0;
				text-align: center;
				font-size: 30px;
				font-weight: bold;
			}
		</style>
	</head>

	<body>
		<span>GoSteps()函数</span>
		<br>
		<button id="btn1"> 结果看console</button>
		<hr/>
		<p id="cont1"></p>
		<p id="cont2"></p>
		<hr />
		<div class="select-father">
			<select id="year-select">
            <option value="1991">1991</option>
            <option value="1992">1992</option>
            <option value="1993">1993</option>
            <option value="1994">1994</option>
            <option value="1995">1995</option>
            <option value="1996">1996</option>
            <option value="1997">1997</option>
            <option value="1998">1998</option>
            <option value="1999">1999</option>
            <option value="2000">2000</option>
            <option value="2001">2001</option>
            <option value="2002">2002</option>
            <option value="2003">2003</option>
            <option value="2004">2004</option>
            <option value="2005">2005</option>
            <option value="2006">2006</option>
            <option value="2007">2007</option>
            <option value="2008">2008</option>
            <option value="2009">2009</option>
            <option value="2010">2010</option>
            <option value="2011">2011</option>
            <option value="2012">2012</option>
            <option value="2013">2013</option>
            <option value="2014">2014</option>
            <option value="2015">2015</option>
            <option value="2016">2016</option>
            <option value="2017">2017</option>
            <option value="2018">2018</option>
            <option value="2019">2019</option>
            <option value="2020">2020</option>
            <option value="2021">2021</option>
            <option value="2022">2022</option>
            <option value="2023">2023</option>
            <option value="2024">2024</option>
            <option value="2025">2025</option>
            <option value="2026">2026</option>
            <option value="2027">2027</option>
            <option value="2028">2028</option>
            <option value="2029">2029</option>
            <option value="2030">2030</option>
            <option value="2031">2031</option>
            <option value="2032">2032</option>
            <option value="2033">2033</option>
            <option value="2034">2034</option>
            <option value="2035">2035</option>
            <option value="2036">2036</option>
            <option value="2037">2037</option>
            <option value="2038">2038</option>
            <option value="2039">2039</option>
            <option value="2040">2040</option>
        </select>

			<select id="month-select">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>

			<select id="day-select">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
            <option value="25">25</option>
            <option value="26">26</option>
            <option value="27">27</option>
            <option value="28">28</option>
            <option value="29" class="normal-31 normal-30 leapYear">29</option>
            <option value="30" class="normal-31 normal-30">30</option>
            <option value="31" class="normal-31">31</option>
        </select>

			<select id="hour-select">
            <option value="0">00</option>
            <option value="1">01</option>
            <option value="2">02</option>
            <option value="3">03</option>
            <option value="4">04</option>
            <option value="5">05</option>
            <option value="6">06</option>
            <option value="7">07</option>
            <option value="8">08</option>
            <option value="9">09</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
        </select>

			<select id="minite-select">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
            <option value="25">25</option>
            <option value="26">26</option>
            <option value="27">27</option>
            <option value="28">28</option>
            <option value="29">29</option>
            <option value="30">30</option>
            <option value="31">31</option>
            <option value="32">32</option>
            <option value="33">33</option>
            <option value="34">34</option>
            <option value="35">35</option>
            <option value="36">36</option>
            <option value="37">37</option>
            <option value="38">38</option>
            <option value="39">39</option>
            <option value="40">40</option>
            <option value="41">41</option>
            <option value="42">42</option>
            <option value="43">43</option>
            <option value="44">44</option>
            <option value="45">45</option>
            <option value="46">46</option>
            <option value="47">47</option>
            <option value="48">48</option>
            <option value="49">49</option>
            <option value="50">50</option>
            <option value="51">51</option>
            <option value="52">52</option>
            <option value="53">53</option>
            <option value="54">54</option>
            <option value="55">55</option>
            <option value="56">56</option>
            <option value="57">57</option>
            <option value="58">58</option>
            <option value="59">59</option>
        </select>

			<select id="second-select">
            <option value="0">0</option>        
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
            <option value="25">25</option>
            <option value="26">26</option>
            <option value="27">27</option>
            <option value="28">28</option>
            <option value="29">29</option>
            <option value="30">30</option>
            <option value="31">31</option>
            <option value="32">32</option>
            <option value="33">33</option>
            <option value="34">34</option>
            <option value="35">35</option>
            <option value="36">36</option>
            <option value="37">37</option>
            <option value="38">38</option>
            <option value="39">39</option>
            <option value="40">40</option>
            <option value="41">41</option>
            <option value="42">42</option>
            <option value="43">43</option>
            <option value="44">44</option>
            <option value="45">45</option>
            <option value="46">46</option>
            <option value="47">47</option>
            <option value="48">48</option>
            <option value="49">49</option>
            <option value="50">50</option>
            <option value="51">51</option>
            <option value="52">52</option>
            <option value="53">53</option>
            <option value="54">54</option>
            <option value="55">55</option>
            <option value="56">56</option>
            <option value="57">57</option>
            <option value="58">58</option>
            <option value="59">59</option>
        </select>
		</div>
		<p id="result-wrapper">现在距离 2001年1月1日星期X HH:MM:SS 还有 X 天 X 小时 X 分 X 秒</p>
		<script>
			function Go() {
				console.log("Go");
			}

			function GoSteps(n) {
				console.log("GoSteps(" + n + ")");
				if (n == "")
					return;
				if (n <= 0)
					return;
				n = Math.floor(n);
				while (n > 0) {
					Go()
					n--;
				}
			}
			document.querySelector("#btn1").addEventListener("click", function() {
				GoSteps(10); // Go 10次
				GoSteps(1); // Go 1次
				GoSteps(); // Go 1次，认为缺少参数时，默认参数为1
				GoSteps(0); // 0次
				GoSteps(-1); // 0次
				GoSteps(1.4); // Go 1次
				GoSteps(1.6); // Go 1次
				GoSteps(-1); // 0次
				GoSteps(true); // Go 1次
				GoSteps(false); // 0次
				GoSteps("Test"); // 0次
				GoSteps(NaN); // 0次
				GoSteps(null); // 0次
			});
			//时钟
			var p1 = document.querySelector("#cont1");
			var p2 = document.querySelector("#cont2");
			setInterval(function() {
				var now = new Date(),
					y = now.getFullYear(),
					m = now.getMonth() + 1,
					D = now.getDate(),
					d = now.getDay(),
					h = now.getHours(),
					mi = now.getMinutes(),
					s = now.getSeconds();
				print1(y, m, D, d, h, mi, s);
				print2(y, m, D, d, h, mi, s);
			}, 1000);

			function addZero(a) {
				return (a < 10 ? "0" + a : a);
			}

			function week(d) {
				var weeks = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"];
				return weeks[d];
			}

			function print1(year, month, Day, day, hour, minute, second) {
				p1.innerHTML = year + "年" + addZero(month) + "月" + addZero(Day) + "日" +
					week(day) + " " + addZero(hour) + ":" + addZero(minute) + ":" + addZero(second);
			}

			function apm(hour) {
				return (hour < 12 ? "am" : "pm");
			}

			function sweek(d) {
				var Weekend = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
				return Weekend[d];
			}

			function print2(year, month, Day, day, hour, minute, second) {
				p2.innerHTML = year + "-" + addZero(month) + "-" + addZero(Day) + " " + sweek(day) +
					addZero(hour) + ":" + addZero(minute) + ":" + addZero(second) + " " + apm("hour");
			}
			//计算时间差
			var selFather = document.getElementsByClassName('select-father')[0];
			var I;
			selFather.onchange = function(e) {
				var yearSel = selFather.children[0],
					monthSel = selFather.children[1],
					dateSel = selFather.children[2],
					hourSel = selFather.children[3],
					minSel = selFather.children[4],
					secondSel = selFather.children[5];
				var yearOpt = yearSel.options[yearSel.selectedIndex].value,
					monthOpt = monthSel.options[monthSel.selectedIndex].value,
					dateOpt = dateSel.options[dateSel.selectedIndex].value,
					hourOpt = hourSel.options[hourSel.selectedIndex].value,
					minOpt = minSel.options[minSel.selectedIndex].value,
					secondOpt = secondSel.options[secondSel.selectedIndex].value;
				var normal31 = dateSel.getElementsByClassName('normal-31'),
					normal30 = dateSel.getElementsByClassName('normal-30'),
					leapYear = dateSel.getElementsByClassName('leapYear');
				if (monthOpt == 4 || monthOpt == 6 || monthOpt == 9 || monthOpt == 11) {
					normal31[2].style.display = "none";
					for (var i = 0; i < normal30.length; i++) {
						normal30[i].style.display = "block";
					}
				}
				if (monthOpt == 1 || monthOpt == 3 || monthOpt == 5 || monthOpt == 7 || monthOpt == 8 || monthOpt == 10 || monthOpt == 12) {
					for (var i = 0; i < normal31.length; i++) {
						normal31[i].style.display = "block";
					}
				}
				// 处理 2 月 
				if (monthOpt == 2 && checkLeapYear(yearOpt)) {
					// 闰年
					for (var i = 0; i < normal31.length; i++) {
						normal31[i].style.display = "none";
					}
					leapYear[0].style.display = "block";
				} else {
					// 平年
					for (var i = 0; i < normal31.length; i++) {
						normal31[i].style.display = "none";
					}
				}
				var minSecondTimeSetting = setTime(yearOpt, monthOpt, dateOpt, hourOpt, minOpt, secondOpt)
				var obj = {
					"year": yearOpt,
					"month": monthOpt,
					"date": dateOpt,
					"day": minSecondTimeSetting.day + 1,
					"hour": hourOpt,
					"min": minOpt,
					"second": secondOpt
				}
				showTime(obj, minSecondTimeSetting.minSecondTime);
			}

			function showTime(obj, settingMinSecTime) {
				var targetElement = document.getElementById('result-wrapper');
				clearInterval(I);
				I = setInterval(function() {
					var time = new Date(),
						year = time.getFullYear(),
						month = time.getMonth() + 1,
						date = time.getDate(),
						day = time.getDay(),
						hours = time.getHours(),
						minutes = time.getMinutes(),
						seconds = time.getSeconds();
					var nowMinSecTime = time.getTime();
					if (settingMinSecTime < nowMinSecTime) {
						targetElement.innerHTML = "现在距离 " + Beauty(obj.year, obj.month, obj.date, obj.day, obj.hour, obj.min, obj.second) + " 已经过去 " + lessTimeBeauty(returnMinTime(nowMinSecTime, settingMinSecTime));
					} else {
						targetElement.innerHTML = "现在距离 " + Beauty(obj.year, obj.month, obj.date, obj.day, obj.hour, obj.min, obj.second) + " 还有 " + lessTimeBeauty(returnMinTime(settingMinSecTime, nowMinSecTime));
					}
				}, 1000)
			}
			// main Souce
			function Start(obj, settingMinSecTime, targetElement) {
				var time = new Date(),
					year = time.getFullYear(),
					month = time.getMonth() + 1,
					date = time.getDate(),
					day = time.getDay(),
					hours = time.getHours(),
					minutes = time.getMinutes(),
					seconds = time.getSeconds();
				var nowMinSecTime = time.getTime();
				if (settingMinSecTime < nowMinSecTime) {
					targetElement.innerHTML = "现在距离 " + Beauty(obj.year, obj.month, obj.date, obj.day, obj.hour, obj.min, obj.second) + " 已经过去 " + lessTimeBeauty(returnMinTime(nowMinSecTime, settingMinSecTime));
				} else {
					targetElement.innerHTML = "现在距离 " + Beauty(obj.year, obj.month, obj.date, obj.day, obj.hour, obj.min, obj.second) + " 还有 " + lessTimeBeauty(returnMinTime(settingMinSecTime, nowMinSecTime));
				}
			}

			function returnMinTime(maxTime, minTime) {
				var minx = maxTime - minTime;
				return {
					"date": AddZero(parseInt(minx / 1000 / 60 / 60 / 24), 10),
					"hour": AddZero(parseInt(minx / 1000 / 60 / 60 % 24), 10),
					"min": AddZero(parseInt(minx / 1000 / 60 % 60 % 24), 10),
					"second": AddZero(parseInt(minx / 1000 % 60 % 60), 10)
				}
			}

			function lessTimeBeauty(obj) {
				return ' ' + obj.date + ' 天 ' + obj.hour + ' 小时 ' + obj.min + ' 分 ' + obj.second + ' 秒 '
			}

			function setTime(year, month, date, hour, min, second) {
				var newSet = new Date();
				newSet.setFullYear(year);
				newSet.setMonth(month - 1);
				newSet.setDate(date);
				newSet.setHours(hour);
				newSet.setMinutes(min);
				newSet.setSeconds(second);
				return {
					"minSecondTime": newSet.getTime(),
					"day": newSet.getDay()
				}
			}

			function checkLeapYear(year) {
				if (year % 4 == 0 && year % 100 !== 0 || year % 400 == 0) {
					return true;
				} else {
					return false;
				}
			}

			function Beauty(y, m, date, d, h, min, s) {
				return y + "年" + AddZero(m, 10) + "月" + AddZero(date, 10) + "日" + getWeekend(d, 1) + "  " + AddZero(h, 10) + ":" + AddZero(min, 10) + ":" + AddZero(s, 10)
			}

			function AddZero(target, tagBit) {
				return (target < tagBit ? '0' + target : target)
			}

			function getWeekend(day, type) {
				var WeekendStyles = [
					["SunDay", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
					["星期日", "星期五", "星期四", "星期三", "星期二", "星期一", "星期六"]
				];
				return WeekendStyles[type][day];
			}

			function judgeMoon(hour) {
				return hour < 12 ? "AM" : "PM"
			}
		</script>
	</body>

</html>